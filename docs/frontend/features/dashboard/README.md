# ダッシュボード機能

## 概要

**業界に依存しない汎用ダッシュボード基盤**。任意のテーブルデータを組み合わせて、組織のニーズに合わせた情報を一元表示する、完全にカスタマイズ可能なホーム画面。

## プラットフォーム設計思想

このダッシュボード機能は、**Astar Management の汎用プラットフォーム戦略**の中核を担います：

- **業界非依存**: コアシステムは特定の業界に依存しない
- **テンプレート駆動**: 業界別設定は外部テンプレートで注入
- **データ中心**: あらゆるテーブルデータを統一的に扱う
- **拡張可能**: カスタムウィジェットやビューを追加可能

## コンセプト

**「必要な情報を、必要な形で、一目で把握」**

- 各ユーザーが自分に必要な情報だけを表示
- テーブル機能のビューコンポーネントを再利用
- ドラッグ&ドロップで自由にレイアウト変更
- ロールに応じたデフォルト設定（テンプレートで定義）

## 主要機能

### 1. ウィジェットシステム
- **データウィジェット**: テーブルデータの表示（テーブル/カンバン/チャート形式）
- **統計ウィジェット**: KPI、集計値、トレンドの可視化
- **アクティビティウィジェット**: タイムライン、最近の更新
- **クイックアクションウィジェット**: よく使う操作へのショートカット

### 2. レイアウト管理
- **グリッドシステム**: 12列のレスポンシブグリッド
- **ドラッグ&ドロップ**: 直感的な配置変更
- **リサイズ**: ウィジェットサイズの調整
- **保存/読み込み**: レイアウトの永続化

### 3. データ連携
- **テーブル統合**: 任意のテーブルからデータ取得
- **リアルタイム更新**: WebSocketによる自動更新
- **フィルター**: ウィジェット単位でのデータ絞り込み
- **キャッシュ**: パフォーマンス最適化

### 4. カスタマイズ
- **ビュー選択**: テーブル/カンバン/チャート形式の切り替え
- **表示設定**: 列選択、ソート、表示行数
- **更新頻度**: 自動更新の間隔設定
- **テーマ**: ウィジェットの外観カスタマイズ

## アーキテクチャ

### 依存関係
```
dashboard/
  ├─> table/         # テーブルビューコンポーネント
  ├─> auth/          # ロールベースの表示制御
  └─> workspace/     # ワークスペース設定
```

### コンポーネント構成
```
DashboardPage.vue
├── DashboardLayout.vue          # グリッドレイアウト
├── DashboardWidget.vue          # ウィジェットコンテナ
│   ├── WidgetHeader.vue        # タイトル、設定
│   └── WidgetContent.vue       # コンテンツエリア
│       ├── TableView.vue       # table機能から
│       ├── KanbanView.vue      # table機能から
│       ├── ChartView.vue       # table機能から
│       ├── StatsWidget.vue     # ダッシュボード専用
│       └── ActivityWidget.vue  # ダッシュボード専用
└── DashboardSettings.vue        # 全体設定
```

## ユースケース（汎用例）

### 管理者向けダッシュボード
- 組織全体のKPI表示
- チーム/部門別のメトリクス
- 重要な通知・アラート
- システム使用状況

### 実務担当者向けダッシュボード  
- 自分に関連するレコード一覧
- 今日のスケジュール・タスク
- 期限が近いアイテム
- 未処理の通知

### サポートスタッフ向けダッシュボード
- 処理待ちタスク
- カレンダー・スケジュール
- クイックアクション（頻出操作）
- チーム活動ログ

> **注**: 具体的な表示内容は、適用する業界テンプレートによって決定されます

## プリセット機能

### ロールベースプリセット
テンプレートで定義されたロールに応じた標準レイアウト：
- 新規ユーザーは自動的に適切なレイアウトでスタート
- カスタマイズ後も「デフォルトに戻す」が可能
- **業界テンプレートがロール定義を提供**

### カスタムプリセット
- レイアウトを保存して再利用
- チーム内でレイアウトを共有
- 複数のレイアウトを切り替え

## パフォーマンス考慮

### データ取得の最適化
- ウィジェット単位での遅延ローディング
- 必要なフィールドのみ取得
- バッチリクエスト

### 表示の最適化
- 仮想スクロール（大量データ対応）
- ウィジェットの遅延レンダリング
- 非表示ウィジェットの更新停止

## 技術仕様

### 使用ライブラリ
- **Vue Grid Layout**: グリッドシステム
- **VueUse**: ドラッグ&ドロップ、リサイズ
- **Chart.js**: グラフ表示
- **date-fns**: 日付処理

### 状態管理
- **Pinia Store**: ダッシュボード設定
- **Composables**: ウィジェットデータ管理
- **LocalStorage**: レイアウト永続化

詳細な実装については以下のドキュメントを参照：
- [コンポーネント設計](./components.md)
- [状態管理](./state.md)
- [画面実装](./views.md)