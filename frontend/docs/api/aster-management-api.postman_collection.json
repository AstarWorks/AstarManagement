{
  "info": {
    "name": "Aster Management API",
    "description": "API collection for Aster Management legal case management system",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{access_token}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8080/api/v1",
      "type": "string"
    },
    {
      "key": "access_token",
      "value": "",
      "type": "string"
    },
    {
      "key": "refresh_token",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set('access_token', response.accessToken);",
                  "pm.collectionVariables.set('refresh_token', response.refreshToken);",
                  "",
                  "pm.test('Status code is 200', () => {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test('Response has tokens', () => {",
                  "    pm.expect(response).to.have.property('accessToken');",
                  "    pm.expect(response).to.have.property('refreshToken');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"email\": \"lawyer@astermanagement.com\",\n    \"password\": \"password123\",\n    \"rememberMe\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/auth/login",
              "host": ["{{base_url}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "Refresh Token",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"refreshToken\": \"{{refresh_token}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/auth/refresh",
              "host": ["{{base_url}}"],
              "path": ["auth", "refresh"]
            }
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/auth/me",
              "host": ["{{base_url}}"],
              "path": ["auth", "me"]
            }
          }
        },
        {
          "name": "Logout",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"refreshToken\": \"{{refresh_token}}\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/auth/logout",
              "host": ["{{base_url}}"],
              "path": ["auth", "logout"]
            }
          }
        }
      ]
    },
    {
      "name": "Matters",
      "item": [
        {
          "name": "List Matters",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/matters?page=0&size=20&status=ACTIVE&sort=createdDate,desc",
              "host": ["{{base_url}}"],
              "path": ["matters"],
              "query": [
                {
                  "key": "page",
                  "value": "0"
                },
                {
                  "key": "size",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "ACTIVE"
                },
                {
                  "key": "sort",
                  "value": "createdDate,desc"
                }
              ]
            }
          }
        },
        {
          "name": "Get Matter by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/matters/:id",
              "host": ["{{base_url}}"],
              "path": ["matters", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{matter_id}}"
                }
              ]
            }
          }
        },
        {
          "name": "Create Matter",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set('matter_id', response.id);",
                  "",
                  "pm.test('Status code is 201', () => {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test('Matter created with correct status', () => {",
                  "    pm.expect(response.status).to.equal('DRAFT');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"title\": \"Smith vs. Johnson Property Dispute\",\n    \"description\": \"Property boundary dispute between neighbors\",\n    \"type\": \"CIVIL_LITIGATION\",\n    \"priority\": \"HIGH\",\n    \"clientId\": \"{{client_id}}\",\n    \"dueDate\": \"2024-12-31T23:59:59Z\",\n    \"tags\": [\"property\", \"civil\", \"urgent\"]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/matters",
              "host": ["{{base_url}}"],
              "path": ["matters"]
            }
          }
        },
        {
          "name": "Update Matter",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"title\": \"Updated Matter Title\",\n    \"priority\": \"URGENT\",\n    \"tags\": [\"property\", \"civil\", \"urgent\", \"updated\"]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/matters/:id",
              "host": ["{{base_url}}"],
              "path": ["matters", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{matter_id}}"
                }
              ]
            }
          }
        },
        {
          "name": "Update Matter Status",
          "request": {
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"status\": \"ACTIVE\",\n    \"reason\": \"Client approved to proceed\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/matters/:id/status",
              "host": ["{{base_url}}"],
              "path": ["matters", ":id", "status"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{matter_id}}"
                }
              ]
            }
          }
        },
        {
          "name": "Delete Matter",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/matters/:id",
              "host": ["{{base_url}}"],
              "path": ["matters", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{matter_id}}"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Documents",
      "item": [
        {
          "name": "List Documents",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/documents?matterId={{matter_id}}&category=CONTRACT&hasOcr=true",
              "host": ["{{base_url}}"],
              "path": ["documents"],
              "query": [
                {
                  "key": "matterId",
                  "value": "{{matter_id}}"
                },
                {
                  "key": "category",
                  "value": "CONTRACT"
                },
                {
                  "key": "hasOcr",
                  "value": "true"
                }
              ]
            }
          }
        },
        {
          "name": "Upload Document",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set('document_id', response.document.id);",
                  "",
                  "pm.test('Document uploaded successfully', () => {",
                  "    pm.response.to.have.status(200);",
                  "    pm.expect(response.document).to.have.property('id');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "title",
                  "value": "Service Agreement",
                  "type": "text"
                },
                {
                  "key": "category",
                  "value": "CONTRACT",
                  "type": "text"
                },
                {
                  "key": "matterId",
                  "value": "{{matter_id}}",
                  "type": "text"
                },
                {
                  "key": "tags[]",
                  "value": "legal",
                  "type": "text"
                },
                {
                  "key": "tags[]",
                  "value": "contract",
                  "type": "text"
                },
                {
                  "key": "processOcr",
                  "value": "true",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/documents",
              "host": ["{{base_url}}"],
              "path": ["documents"]
            }
          }
        },
        {
          "name": "Download Document",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/documents/:id/download",
              "host": ["{{base_url}}"],
              "path": ["documents", ":id", "download"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{document_id}}"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Memos",
      "item": [
        {
          "name": "List Memos",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/memos?matterId={{matter_id}}&type=CLIENT_MEMO&unreadOnly=true",
              "host": ["{{base_url}}"],
              "path": ["memos"],
              "query": [
                {
                  "key": "matterId",
                  "value": "{{matter_id}}"
                },
                {
                  "key": "type",
                  "value": "CLIENT_MEMO"
                },
                {
                  "key": "unreadOnly",
                  "value": "true"
                }
              ]
            }
          }
        },
        {
          "name": "Create Memo",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "const response = pm.response.json();",
                  "pm.collectionVariables.set('memo_id', response.memo.id);",
                  "",
                  "pm.test('Memo created successfully', () => {",
                  "    pm.response.to.have.status(200);",
                  "    pm.expect(response.memo.status).to.equal('DRAFT');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"subject\": \"Case Update: Discovery Documents\",\n    \"content\": \"<p>Dear Client,</p><p>I wanted to update you on the status of your case...</p>\",\n    \"type\": \"CLIENT_MEMO\",\n    \"priority\": \"HIGH\",\n    \"matterId\": \"{{matter_id}}\",\n    \"recipients\": [\n        {\n            \"type\": \"CLIENT\",\n            \"id\": \"{{client_id}}\"\n        }\n    ],\n    \"tags\": [\"discovery\", \"update\"],\n    \"requiresResponse\": true,\n    \"responseDeadline\": \"2024-05-01T00:00:00Z\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/memos",
              "host": ["{{base_url}}"],
              "path": ["memos"]
            }
          }
        },
        {
          "name": "Send Memo",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"sendImmediately\": true,\n    \"notificationChannels\": [\"EMAIL\", \"IN_APP\"]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/memos/:id/send",
              "host": ["{{base_url}}"],
              "path": ["memos", ":id", "send"],
              "variable": [
                {
                  "key": "id",
                  "value": "{{memo_id}}"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Users",
      "item": [
        {
          "name": "List Users",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users?status=ACTIVE&roleId=lawyer",
              "host": ["{{base_url}}"],
              "path": ["users"],
              "query": [
                {
                  "key": "status",
                  "value": "ACTIVE"
                },
                {
                  "key": "roleId",
                  "value": "lawyer"
                }
              ]
            }
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/me",
              "host": ["{{base_url}}"],
              "path": ["users", "me"]
            }
          }
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n    \"name\": \"John Doe\",\n    \"phoneNumber\": \"+1-555-0123\",\n    \"preferredLanguage\": \"en\",\n    \"timezone\": \"America/New_York\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/users/me",
              "host": ["{{base_url}}"],
              "path": ["users", "me"]
            }
          }
        }
      ]
    }
  ]
}